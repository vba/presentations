<!DOCTYPE html>
<html>
<head>
	<title>Sample 6 - Testability</title>
	<link rel="stylesheet" href="../dependencies/jasmine-1.3.0/jasmine.css"/>
</head>
<body>
	<h2>You have no more excuses to avoid client-side testing</h2>
	
	<script type="text/javascript" src="../dependencies/jquery-1.10.2.min.js"></script>
	<script type="text/javascript" src="../dependencies/knockout.js"></script>
	<script type="text/javascript" src="../dependencies/jasmine-1.3.0/jasmine.js"></script>
	<script type="text/javascript" src="../dependencies/jasmine-1.3.0/jasmine-html.js"></script>
	
	<script type="text/javascript">
		(function() {
			
			function Person(name, age, address) {
				var self = this;
				self.name = name;
				self.age = ko.observable(age);
				self.address = ko.observable(address);
				
				self.formatAddress = ko.computed(function(){
					return [self.address().street, self.address().number].join(' st. ');
				});
			}
			
			var viewModel = function() {
			
				var _public = {
					getModel: function() {
					},
					persons: ko.observableArray([
						new Person("Eric Cartman", 8, serverData[0]),
						new Person("Stan Marsh", 8, serverData[0]),
						new Person("Kayle Broflovsky", 8, serverData[0]),
						new Person("Chef", 45, serverData[2]),
						new Person("Kevin", 50, serverData[1]),
						new Person("Alphonse Mephesto", 120, serverData[1]),
					]),
					loadServerData: function () {
						_public.getModel().get("/persons", function(data) {
							// Do some stuff
						});
					},
					addPerson: function () {
						_public.persons.push(new Person("T & P", 35, serverData[3]));
					},
					removePerson: function (person) {
						_public.persons.remove(person);
					}
				};
				return _public;
			}();
			
			ko.applyBindings(viewModel);
		})();
	</script>
</body>
</html>